<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Form Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 30px;
            color: white;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-container {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }

        .form-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-section h3::before {
            content: "ðŸ“‹";
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 0.95rem;
        }

        .required {
            color: #e74c3c;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .prompt-section {
            background: #fff;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }

        .prompt-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }

        .prompt-number {
            background: #4facfe;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .remove-prompt {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background 0.3s ease;
        }

        .remove-prompt:hover {
            background: #c0392b;
        }

        .choices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .add-prompt-btn, .export-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .add-prompt-btn:hover, .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }

        .export-section {
            background: #2c3e50;
            padding: 30px;
            text-align: center;
        }

        .export-btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            font-size: 1.1rem;
            padding: 18px 40px;
        }

        .export-btn:hover {
            box-shadow: 0 10px 20px rgba(46, 204, 113, 0.3);
        }

        .info-tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
        }

        .info-tooltip .tooltip-icon {
            background: #4facfe;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: help;
        }

        .info-tooltip .tooltip-text {
            visibility: hidden;
            width: 300px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .info-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .rating-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 10px;
            margin-top: 5px;
            font-size: 0.85rem;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>P28 - PR Writer V2 - JSON Generator</h1>
            <p>Fill out the form to generate your structured JSON data</p>
        </div>

        <div class="form-container">
            <form id="jsonForm">
                <!-- Basic Information -->
                <div class="form-section">
                    <h3>Basic Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="uuid">UUID <span class="required">*</span></label>
                            <input type="text" id="uuid" name="uuid" required placeholder="Auto-generated if empty">
                        </div>
                        <div class="form-group">
                            <label for="hfi_id">HFI ID <span class="required">*</span></label>
                            <input type="text" id="hfi_id" name="hfi_id" required placeholder="xxxx-xxx-xxx">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="language">Language <span class="required">*</span></label>
                            <select id="language" name="language" required>
                                <option value="">Select language</option>
                                <option value="python">Python</option>
                                <option value="javascript/typescript">JavaScript/TypeScript</option>
                                <option value="rust">Rust</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="interface">Interface <span class="required">*</span></label>
                            <select id="interface" name="interface" required>
                                <option value="">Select interface</option>
                                <option value="pr_writer_v2">PR Writer v2</option>
                                <option value="pr_writer_rust_v2">PR Writer Rust v2</option>
                                <option value="pr_writer_javascript_v2">PR Writer JavaScript v2</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Project Details -->
                <div class="form-section">
                    <h3>Project Details</h3>
                    <div class="form-group">
                        <label for="starting_commit_hash">Starting Commit Hash</label>
                        <input type="text" id="starting_commit_hash" name="starting_commit_hash" placeholder="Git commit hash">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="jira">JIRA Ticket</label>
                            <input type="text" id="jira" name="jira" placeholder="ANTHS-xxxx">
                        </div>
                        <div class="form-group">
                            <label for="usecase">Use Case <span class="required">*</span></label>
                            <select id="usecase" name="usecase" required>
                                <option value="">Select use case</option>
                                <option value="feature_implementation">Feature Implementation</option>
                                <option value="feature_extension">Feature Extension</option>
                                <option value="code_refactor">Code Refactor</option>
                                <option value="optimization_testing">Optimization Testing</option>
                                <option value="feature_reimplementation">Feature Reimplementation</option>
                                <option value="test_coverage">Test Coverage</option>
                                <option value="test_coverage_bootstrap">Test Coverage Bootstrap</option>
                                <option value="debugging_fixes">Debugging Fixes</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="root_gdrive">Root Google Drive Link</label>
                            <input type="url" id="root_gdrive" name="root_gdrive" placeholder="https://drive.google.com/...">
                        </div>
                        <div class="form-group">
                            <label for="final_codebase_link">Final Codebase Link</label>
                            <input type="url" id="final_codebase_link" name="final_codebase_link" placeholder="https://github.com/...">
                        </div>
                    </div>
                </div>

                <!-- Final Comments -->
                <div class="form-section">
                    <h3>Final Comment</h3>
                    <span>This is the final comment that dev will submit on the interaction portal.</span>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="final_comment_pros">Pros</label>
                            <textarea id="final_comment_pros" name="final_comment_pros" placeholder="List positive aspects and benefits..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="final_comment_cons">Cons</label>
                            <textarea id="final_comment_cons" name="final_comment_cons" placeholder="List negative aspects and drawbacks..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Worker Info -->
                <div class="form-section">
                    <h3>Worker Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="worker_id">Worker ID</label>
                            <input type="email" id="worker_id" name="worker_id" placeholder="DEV_TURING_EMAIL">
                        </div>
                        <div class="form-group">
                            <label for="build_creator">Build Creator</label>
                            <select id="build_creator" name="build_creator">
                                <option value="default">Default</option>
                                <option value="worker">Worker</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Repository Info -->
                <div class="form-section">
                    <h3>Repository Information</h3>
                    <div class="form-group">
                        <label for="repo_link">Repository Link</label>
                        <input type="url" id="repo_link" name="repo_link" placeholder="https://github.com/user/repo">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="codebase_category">Codebase Category</label>
                            <select id="codebase_category" name="codebase_category">
                                <option value="">Select category</option>
                                <option value="small">Small</option>
                                <option value="large">Large</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="repo_type">Repository Type</label>
                            <select id="repo_type" name="repo_type">
                                <option value="">Select type</option>
                                <option value="application">Application</option>
                                <option value="library">Library</option>
                                <option value="sdk">SDK</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Prompts Section -->
                <div class="form-section">
                    <h3>Prompts</h3>
                    <div id="prompts-container">
                        <!-- Prompts will be added dynamically -->
                    </div>
                    <button type="button" class="add-prompt-btn" onclick="addPrompt()">+ Add Prompt</button>
                </div>
            </form>
        </div>

        <div class="export-section">
            <button class="export-btn" onclick="exportJSON()">ðŸš€ Export JSON</button>
            <button class="export-btn" type="button" style="margin-left: 20px; background: linear-gradient(135deg, #e74c3c 0%, #fd746c 100%);" onclick="clearAllFields()">ðŸ§¹ Clear All</button>
        </div>
    </div>

    <script>
        let promptCount = 0;

        function addPrompt() {
            promptCount++;
            const container = document.getElementById('prompts-container');
            
            const promptDiv = document.createElement('div');
            promptDiv.className = 'prompt-section';
            promptDiv.innerHTML = `
                <div class="prompt-header">
                    <span class="prompt-number">Prompt ${promptCount}</span>
                    <button type="button" class="remove-prompt" onclick="removePrompt(this)">Remove</button>
                </div>
                
                <div class="form-group">
                    <label>Prompt Text</label>
                    <textarea name="prompt_${promptCount}" placeholder="Enter the prompt text..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Response Time (seconds)</label>
                        <input type="number" name="response_time_${promptCount}" min="1" value="1">
                    </div>
                    <div class="form-group">
                        <label>Issue Type</label>
                        <select name="issue_type_${promptCount}">
                            <option value="">Select issue type</option>
                            <option value="technical_inconsistency">Technical Inconsistency</option>
                            <option value="tool">Tool</option>
                            <option value="code_correctness">Code Correctness</option>
                            <option value="setup">Setup</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>PDF Link</label>
                        <input type="url" name="pdf_link_${promptCount}" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <label>Output Files Link</label>
                        <input type="url" name="output_files_link_${promptCount}" placeholder="https://...">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Level of Correctness</label>
                    <select name="level_of_correctness_${promptCount}">
                        <option value="-1">-1 (Only A is correct)</option>
                        <option value="0">0 (Both models are incorrect)</option>
                        <option value="1">1 (Only B is correct)</option>
                        <option value="2">2 (Both models are correct)</option>
                    </select>
                    <div class="info-tooltip">
                        <span class="tooltip-icon">?</span>
                        <span class="tooltip-text">
                            <strong>Level of Correctness:</strong><br>
                            -1: Poor implementation with significant issues<br>
                            0: Below average with some problems<br>
                            1: Average implementation meeting basic requirements<br>
                            2: Good implementation exceeding expectations
                        </span>
                    </div>
                </div>
                
                <div class="choices-grid">
                    <div class="form-group">
                        <label>Interaction Rating (0-7)</label>
                        <select name="interaction_rating_${promptCount}">
                            ${generateRatingOptions(0, 7)}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Code Logic (-1 to 7)</label>
                        <select name="code_logic_${promptCount}">
                            ${generateRatingOptions(-1, 7)}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Naming Clarity (-1 to 7)</label>
                        <select name="naming_clarity_${promptCount}">
                            ${generateRatingOptions(-1, 7)}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Organization Modularity (-1 to 7)</label>
                        <select name="organization_modularity_${promptCount}">
                            ${generateRatingOptions(-1, 7)}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Interface Design (-1 to 7)</label>
                        <select name="interface_design_${promptCount}">
                            ${generateRatingOptions(-1, 7)}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Error Handling (-1 to 7)</label>
                        <select name="error_handling_${promptCount}">
                            ${generateRatingOptions(-1, 7)}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Documentation (-1 to 7)</label>
                        <select name="documentation_${promptCount}">
                            ${generateRatingOptions(-1, 7)}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Review Readiness (-1 to 7)</label>
                        <select name="review_readiness_${promptCount}">
                            ${generateRatingOptions(-1, 7)}
                        </select>
                    </div>
                </div>
                
                <div class="rating-info">
                    <strong>Rating Scale:</strong> -1 (Not Applicable), 0-3 (Preference for A), 4-7 (Preference for B)
                </div>
                
                <div class="form-group">
                    <label>Comment</label>
                    <textarea name="comment_${promptCount}" placeholder="Additional comments about this prompt..."></textarea>
                </div>
            `;
            
            container.appendChild(promptDiv);
        }

        function removePrompt(button) {
            button.closest('.prompt-section').remove();
        }

        function generateRatingOptions(min, max) {
            let options = '<option value="">Select rating</option>';
            for (let i = min; i <= max; i++) {
                options += `<option value="${i}">${i}</option>`;
            }
            return options;
        }

        function exportJSON() {
            const formData = new FormData(document.getElementById('jsonForm'));
            
            // Generate UUID if empty
            let uuid = formData.get('uuid') || generateUUID();
            
            // Build the JSON structure
            const jsonData = {
                uuid: uuid,
                hfi_id: formData.get('hfi_id') || "",
                language: formData.get('language') || "",
                interface: formData.get('interface') || "",
                starting_commit_hash: formData.get('starting_commit_hash') || "",
                jira: formData.get('jira') || "",
                root_gdrive: formData.get('root_gdrive') || "",
                final_codebase_link: formData.get('final_codebase_link') || "",
                usecase: formData.get('usecase') || "",
                final_comment: {
                    pros: formData.get('final_comment_pros') || "",
                    cons: formData.get('final_comment_cons') || ""
                },
                worker_id: formData.get('worker_id') || "",
                build_creator: formData.get('build_creator') || "default",
                repo: {
                    repo_link: formData.get('repo_link') || "",
                    codebase_category: formData.get('codebase_category') || "",
                    repo_type: formData.get('repo_type') || ""
                },
                prompts: []
            };

            // Collect prompts
            for (let i = 1; i <= promptCount; i++) {
                const promptSection = document.querySelector(`[name="prompt_${i}"]`);
                if (promptSection && promptSection.closest('.prompt-section')) {
                    const prompt = {
                        prompt: formData.get(`prompt_${i}`) || "",
                        response_time_seconds: parseInt(formData.get(`response_time_${i}`)) || 1,
                        pdf_link: formData.get(`pdf_link_${i}`) || "",
                        output_files_link: formData.get(`output_files_link_${i}`) || "",
                        issue_type: formData.get(`issue_type_${i}`) || "",
                        choices: {
                            interaction_rating: parseInt(formData.get(`interaction_rating_${i}`)) || 0,
                            code_logic: parseInt(formData.get(`code_logic_${i}`)) || 0,
                            naming_clarity: parseInt(formData.get(`naming_clarity_${i}`)) || 0,
                            organization_modularity: parseInt(formData.get(`organization_modularity_${i}`)) || 0,
                            interface_design: parseInt(formData.get(`interface_design_${i}`)) || 0,
                            error_handling: parseInt(formData.get(`error_handling_${i}`)) || 0,
                            documentation: parseInt(formData.get(`documentation_${i}`)) || 0,
                            review_readiness: parseInt(formData.get(`review_readiness_${i}`)) || 0
                        },
                        level_of_correctness: parseInt(formData.get(`level_of_correctness_${i}`)) || 0,
                        comment: formData.get(`comment_${i}`) || ""
                    };
                    jsonData.prompts.push(prompt);
                }
            }

            // Download JSON file
            const blob = new Blob([JSON.stringify(jsonData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `form_data_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // Add first prompt by default
        addPrompt();

        function clearAllFields() {
            document.getElementById('jsonForm').reset();
            // Remove all prompts
            const container = document.getElementById('prompts-container');
            container.innerHTML = '';
            promptCount = 0;
            addPrompt();
        }
    </script>
</body>
<div style="text-align:center; margin-top: 20px; font-size: 0.95rem; color: #888;">
    Maintained by Saad Aslam
</div>
</html>
